mixin nav(currentPath, navItems, title)
  div.sidebar-container
    h2.sidebar-header=title
    ul.sidebar-elements
      if navItems
        if navItems.length === 1
          +navContent(headings, 0)
        else
          +navRec(currentPath, navItems, title, 2)

mixin navRec(currentPath, navItems, title, depth)
  for navItem in navItems
    - var isCurrentFile = navItem.path === currentPath;
    - var className = ['sidebar-element', ('level-h' + depth), (isCurrentFile ? 'navItem-active' : 'navItem')];
    - var activeClass = isCurrentFile ? 'navItem-active' : '';
    li(class=className)
      a(href=h.publicPath(navItem.path) class=activeClass)=navItem.file.title
      ul
        if(isCurrentFile)
          +navContent(headings, depth)
        if(navItem.children.length > 0)
          +navRec(currentPath, navItem.children, title, depth + 1)

mixin navContent(headings, currentDepth)
  if headings.length > 1
    each item in headings
      - var level = parseFloat(/h([0-9]+)/.exec(item.tag)[1]);
      - var actualLevel = level + currentDepth - 1;
      - var className = ['sidebar-element', 'level-h' + actualLevel]
      li(class=className)
        a(href='#' + item.id)= item.text
