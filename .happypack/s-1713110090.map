{"version":3,"sources":["docgen/assets/js/sidebar.js"],"names":["sidebar","options","headersContainer","sidebarContainer","list","document","createElement","classList","add","appendChild","firstChild","contains","sidebarFollowScroll","activeLinks","scrollSpy","linksContainer","querySelector","getPositionsKeyElements","height","navHeight","footerHeight","menuHeight","sidebarTop","titleHeight","positionSidebar","currentScroll","window","pageYOffset","fold","style","top","maxHeight","remove","addEventListener","headers","querySelectorAll","setActiveSidebarLink","forEach","currentHref","item","getAttribute","anchorToFind","header","isCurrentHeader","indexOf","length","findActiveSidebarLink","highestVisibleHeaders","map","element","rect","getBoundingClientRect","filter","innerHeight","bottom","sort","header1","header2","Math","abs","e","target","tagName","toggleDocumentationSidebar","sidebarNav","trigger","init","bodySize","body","clientWidth","toggle","$sidebar","sidebarBBox","title","bodyBBox","footer","navigation","menu","offsetHeight"],"mappings":"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","file":"sidebar.js","sourceRoot":"/Users/lucasbonomi/Sites/instantsearch.js","sourcesContent":["export default function sidebar(options) {\n  const {headersContainer, sidebarContainer} = options;\n\n  const list = document.createElement('ul');\n  list.classList.add('no-mobile');\n\n  sidebarContainer.appendChild(list);\n  if (sidebarContainer.firstChild.classList.contains('sidebar-navScroll')) {\n    sidebarFollowScroll(sidebarContainer.firstChild);\n  }\n  activeLinks(sidebarContainer);\n  scrollSpy(sidebarContainer, headersContainer);\n}\n\nfunction sidebarFollowScroll(sidebarContainer) {\n  const linksContainer = sidebarContainer.querySelector('ul');\n  const {height, navHeight, footerHeight, menuHeight, sidebarTop, titleHeight} =\n    getPositionsKeyElements(sidebarContainer);\n  const positionSidebar = () => {\n    const currentScroll = window.pageYOffset;\n    if (currentScroll > sidebarTop - navHeight) {\n      const fold = height - footerHeight - menuHeight - navHeight;\n      if (currentScroll > fold) {\n        sidebarContainer.style.top = `${fold - currentScroll + navHeight}px`;\n      } else {\n        sidebarContainer.style.top = null;\n      }\n      sidebarContainer.classList.add('fixed');\n      linksContainer.style.maxHeight = `calc(100vh - ${titleHeight + navHeight}px)`;\n    } else {\n      sidebarContainer.classList.remove('fixed');\n      linksContainer.style.maxHeight = '';\n    }\n  };\n\n  window.addEventListener('load', positionSidebar);\n  document.addEventListener('DOMContentLoaded', positionSidebar);\n  document.addEventListener('scroll', positionSidebar);\n}\n\nfunction scrollSpy(sidebarContainer, headersContainer) {\n  const headers = [...headersContainer.querySelectorAll('h2')];\n\n  const setActiveSidebarLink = header => {\n    [...sidebarContainer.querySelectorAll('a')].forEach(item => {\n      const currentHref = item.getAttribute('href');\n      const anchorToFind = `#${header.getAttribute('id')}`;\n      const isCurrentHeader =\n        currentHref.indexOf(anchorToFind) > 0 &&\n        currentHref.indexOf(anchorToFind) ===\n        currentHref.length - anchorToFind.length;\n      if (isCurrentHeader) {\n        item.classList.add('active');\n      } else {\n        item.classList.remove('active');\n      }\n    });\n  };\n\n  const findActiveSidebarLink = () => {\n    const highestVisibleHeaders = headers\n      .map(header => ({element: header, rect: header.getBoundingClientRect()}))\n      .filter(({rect}) =>\n        rect.top < window.innerHeight / 3 && rect.bottom < window.innerHeight\n        // top element relative viewport position should be at least 1/3 viewport\n        // and element should be in viewport\n      )\n      // then we take the closest to this position as reference\n      .sort((header1, header2) => Math.abs(header1.rect.top) < Math.abs(header2.rect.top) ? -1 : 1);\n\n    if (headers[0] && highestVisibleHeaders.length === 0) {\n      setActiveSidebarLink(headers[0]);\n      return;\n    }\n\n    if (highestVisibleHeaders[0]) {\n      setActiveSidebarLink(highestVisibleHeaders[0].element);\n    }\n  };\n\n  findActiveSidebarLink();\n  window.addEventListener('load', findActiveSidebarLink);\n  document.addEventListener('DOMContentLoaded', findActiveSidebarLink);\n  document.addEventListener('scroll', findActiveSidebarLink);\n}\n\n// The Following code is used to set active items\n// On the documentation sidebar depending on the\n// clicked item\nfunction activeLinks(sidebarContainer) {\n  const linksContainer = sidebarContainer.querySelector('ul');\n\n  linksContainer.addEventListener('click', e => {\n    if (e.target.tagName === 'A') {\n      [...linksContainer.querySelectorAll('a')].forEach(item => item.classList.remove('active'));\n      e.target.classList.add('active');\n    }\n  });\n}\n// The Following function will make the '.sidebar-opener'\n// clickable and it will open/close the sidebar on the\n// documentations\n\nfunction toggleDocumentationSidebar() {\n  const sidebarNav = document.querySelector('nav.sidebar');\n  const trigger = document.querySelector('.sidebar-opener');\n\n  function init() {\n    const bodySize = document.body.clientWidth;\n    if (bodySize <= 960 && sidebarNav) {\n      trigger.addEventListener('click', () => {\n        sidebarNav.classList.toggle('Showed');\n        trigger.classList.toggle('Showed');\n      });\n    }\n  }\n  init();\n}\ntoggleDocumentationSidebar();\n\nwindow.addEventListener('resize', () => {\n  toggleDocumentationSidebar();\n});\n\nfunction getPositionsKeyElements($sidebar) {\n  const sidebarBBox = $sidebar.getBoundingClientRect();\n  const title = $sidebar.querySelector('.sidebar-header');\n  const bodyBBox = document.body.getBoundingClientRect();\n  const sidebarTop = sidebarBBox.top - bodyBBox.top;\n  const footer = document.querySelector('.ac-footer');\n  const navigation = document.querySelector('.cm-navigation');\n  const menu = document.querySelector('.sidebar-container');\n  const height = document.querySelector('html').getBoundingClientRect().height;\n  const navHeight = navigation.offsetHeight;\n  const footerHeight = footer.offsetHeight;\n  const menuHeight = menu.offsetHeight;\n  const titleHeight = title.offsetHeight;\n\n  return {sidebarTop, height, navHeight, footerHeight, menuHeight, titleHeight};\n}\n"]}