{"version":3,"sources":["docgen/src/examples/urlSync.js"],"names":["updateAfter","searchStateToUrl","searchState","window","location","pathname","stringify","withUrlSync","onSearchStateChange","state","parse","search","slice","addEventListener","setState","clearTimeout","debouncedSetState","setTimeout","history","pushState","props"],"mappings":";;;;;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;AAEA,IAAMA,cAAc,GAApB;AACA,IAAMC,mBACJ,SADIA,gBACJ;AAAA,SACAC,cAAiBC,OAAOC,QAAP,CAAgBC,QAAjC,SAA6C,aAAGC,SAAH,CAAaJ,WAAb,CAA7C,GAA2E,EAD3E;AAAA,CADF;;AAIO,IAAMK,oCAAc,SAAdA,WAAc;AAAA;AAAA;;AACzB,uBAAc;AAAA;;AAAA;;AAAA,YASdC,mBATc;AAAA;AAAA;;AAEZ,YAAKC,KAAL,GAAa,EAACP,aAAa,aAAGQ,KAAH,CAASP,OAAOC,QAAP,CAAgBO,MAAhB,CAAuBC,KAAvB,CAA6B,CAA7B,CAAT,CAAd,EAAb;AACAT,aAAOU,gBAAP,CACE,UADF,EAEE;AAAA,YAASX,WAAT,QAAEO,KAAF;AAAA,eAA0B,MAAKK,QAAL,CAAc,EAACZ,wBAAD,EAAd,CAA1B;AAAA,OAFF;AAHY;AAOb;;AARwB;AAAA;AAAA,gEAUHA,WAVG,EAUY;AACnCa,qBAAa,KAAKC,iBAAlB;AACA,aAAKA,iBAAL,GAAyBC,WAAW,YAAM;AACxCd,iBAAOe,OAAP,CAAeC,SAAf,CACEjB,WADF,EAEE,IAFF,EAGED,iBAAiBC,WAAjB,CAHF;AAKD,SANwB,EAMtBF,WANsB,CAAzB;AAOA,aAAKc,QAAL,CAAc,EAACZ,wBAAD,EAAd;AACD;AApBwB;AAAA;AAAA,+BAsBhB;AACP,eAAO,8BAAC,GAAD,eAAS,KAAKkB,KAAd;AACK,uBAAa,KAAKX,KAAL,CAAWP,WAD7B;AAEK,+BAAqB,KAAKM,mBAF/B;AAGK,qBAAWP,gBAHhB;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;AAKD;AA5BwB;;AAAA;AAAA;AAAA,CAApB;;;;;;;;gCALDD,W;;gCACAC,gB;;gCAIOM,W","file":"urlSync.js","sourceRoot":"/Users/lucasbonomi/Sites/instantsearch.js","sourcesContent":["import React, {Component} from 'react';\nimport qs from 'qs';\n\nconst updateAfter = 700;\nconst searchStateToUrl =\n  searchState =>\n  searchState ? `${window.location.pathname}?${qs.stringify(searchState)}` : '';\n\nexport const withUrlSync = App => class extends Component {\n  constructor() {\n    super();\n    this.state = {searchState: qs.parse(window.location.search.slice(1))};\n    window.addEventListener(\n      'popstate',\n      ({state: searchState}) => this.setState({searchState})\n    );\n  }\n\n  onSearchStateChange = searchState => {\n    clearTimeout(this.debouncedSetState);\n    this.debouncedSetState = setTimeout(() => {\n      window.history.pushState(\n        searchState,\n        null,\n        searchStateToUrl(searchState)\n      );\n    }, updateAfter);\n    this.setState({searchState});\n  };\n\n  render() {\n    return <App {...this.props}\n                searchState={this.state.searchState}\n                onSearchStateChange={this.onSearchStateChange}\n                createURL={searchStateToUrl}\n    />;\n  }\n};\n"]}