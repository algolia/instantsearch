'use strict';

test('hierarchical facets: using getHierarchicalFacetBreadcrumb()', function() {
  var algoliasearch = require('algoliasearch');

  var algoliasearchHelper = require('../../../');

  var appId = 'hierarchical-simple-appId';
  var apiKey = 'hierarchical-simple-apiKey';
  var indexName = 'hierarchical-simple-indexName';

  var client = algoliasearch(appId, apiKey);
  var helper = algoliasearchHelper(client, indexName, {
    hierarchicalFacets: [{
      name: 'categories',
      attributes: ['categories.lvl0', 'categories.lvl1', 'categories.lvl2', 'categories.lvl3']
    }]
  });

  helper.toggleRefine('categories', 'beers > IPA > Flying dog');

  expect(helper.getHierarchicalFacetBreadcrumb('categories')).toEqual(['beers', 'IPA', 'Flying dog']);
});

test('hierarchical facets: using getHierarchicalFacetBreadcrumb before the first refinement', function() {
  var algoliasearch = require('algoliasearch');

  var algoliasearchHelper = require('../../../');

  var appId = 'hierarchical-simple-appId';
  var apiKey = 'hierarchical-simple-apiKey';
  var indexName = 'hierarchical-simple-indexName';

  var client = algoliasearch(appId, apiKey);
  var helper = algoliasearchHelper(client, indexName, {
    hierarchicalFacets: [{
      name: 'categories',
      attributes: ['categories.lvl0', 'categories.lvl1', 'categories.lvl2', 'categories.lvl3']
    }]
  });

  expect(helper.getHierarchicalFacetBreadcrumb('categories')).toEqual([]);
});

test('hierarchical facets: using getHierarchicalFacetBreadcrumb on an undefined facet', function() {
  var algoliasearch = require('algoliasearch');

  var algoliasearchHelper = require('../../../');

  var appId = 'hierarchical-simple-appId';
  var apiKey = 'hierarchical-simple-apiKey';
  var indexName = 'hierarchical-simple-indexName';

  var client = algoliasearch(appId, apiKey);
  var helper = algoliasearchHelper(client, indexName, {
    hierarchicalFacetsRefinements: {categories: ['beers > IPA > Flying dog']}
  });

  expect(
    helper.getHierarchicalFacetBreadcrumb('categories')
  ).toEqual([]);
});
